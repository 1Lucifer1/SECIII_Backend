copyright corpor reserv program accompani materi avail term eclips public licens accompani distribut avail http www eclips org legal epl html contributor corpor initi implement packag org eclips swt graphic import org eclips swt intern gdip import org eclips swt intern win import org eclips swt import java instanc class graphic prepar display specif devic readi paint method code draw imag code display widget exampl code button set imag code load file format support code imag code transpar pixel specifi transpar drawn exampl file format support transpar primari code imag code load graphic file disk creat code imag code code imag code constructor exampl pre imag imag devic graphic bmp pre graphic file color tabl specifi color imag intend possess abov exampl color map closest avail color possibl control map color imag creat code form pre imag data data imag data graphic bmp rgbs data point rgbs specif color imag alloc mani color color constructor color creat imag imag imag devic data pre applic requir greater control imag load process support provid class code imag loader code applic code explicit invok code imag dispos code method releas oper system resourc manag instanc instanc longer requir color imag data imag loader public final class imag extend resourc implement drawabl specifi receiv bitmap icon code code code code public int type handl imag resourc warn field platform depend field part public mark public onli share packag provid avail platform access applic code public int handl specifi transpar pixel int transpar pixel draw imag mem alpha data imag byte alpha data global alpha valu everi pixel int alpha imag data creat imag icon onli win imag data data specifi default scanlin pad static final int prevent uniniti instanc creat outsid packag imag construct empti instanc class specifi width height result drawn creat ani draw oper shown follow exampl pre imag imag devic width height draw rectangl dispos pre note platform limit size imag creat size depend width height depth exampl window imag larger param devic devic creat imag param width width imag param height height imag illeg argument devic null current devic width height negat error handl obtain imag creation public imag devic devic int width int height devic null devic devic devic devic null error init devic width height devic track devic object construct instanc class base provid imag vari depend valu flag possibl flag valu result ident copi src imag result copi src imag disabl result copi src imag gray scale param devic devic creat imag param src imag imag sourc param flag style code code code code code code illeg argument devic null current devic src imag null flag code code code code code code imag dispos imag bitmap icon otherwis invalid state depth imag support error handl obtain imag creation public imag devic devic imag src imag int flag devic null devic devic devic devic null error devic devic src imag null error src imag dispos error switch flag case rectangl src imag bound type src imag type switch type case devic int devic intern null copi bitmap int hdc sourc creat compat int hdc dest creat compat int src select object hdc sourc src imag handl handl creat compat bitmap hdc sourc width height handl error int dest select object hdc dest handl bit blt hdc dest width height hdc sourc select object hdc sourc src select object hdc dest dest delet hdc sourc delet hdc dest releas devic devic intern dispos null transpar pixel src imag transpar pixel alpha src imag alpha src imag alpha data null alpha data byte src imag alpha data length system arraycopi src imag alpha data alpha data alpha data length break case win init devic src imag data els handl copi imag src imag handl width height handl error break default error devic track devic object return case rectangl src imag bound type src imag type byte rgb bitmap info size byte width width byte width byte width byte width byte height height byte height byte height byte height plane bit count compress size imag pel meter pel meter clr clr import color black byte byte byte color white devic int devic intern null sourc int hdc sourc creat compat hdc sourc error monochrom intermedi int creat compat hdc sourc error destin int hdc bmp creat compat hdc bmp error monochrom intermedi section int pbit int int hbm creat section rgb bitmap info pbit hbm error switch type case attach bitmap sourc int src select object hdc sourc src imag handl creat destin bitmap handl creat compat bitmap width height handl error attach section bitmap int select object hbm int bmp select object hdc bmp handl bit blt bitmap monochrom section bit blt width height hdc sourc paint destin rectangl gray rect rect left rect top rect width rect bottom height fill rect hdc bmp rect sys color brush bit blt black bit monochrom bitmap bit destin magic charl petzold book int creat solid brush sys color int brush select object hdc bmp bit blt hdc bmp width height bit blt black bit monochrom bitmap bit destin creat solid brush sys color delet object select object hdc bmp bit blt hdc bmp width height delet object select object hdc bmp brush free resourc select object hdc sourc src select object hdc bmp bmp select object delet hdc sourc delet delet hdc bmp delet object hbm releas devic devic intern dispos null break case icon inform icon info win icon info src imag icon info els icon info src imag handl icon info error int hdc mask creat compat creat destin bitmap icon info hbm color src select object hdc sourc icon info hbm mask els src select object hdc sourc icon info hbm color int hbmp creat compat bitmap hdc sourc width height hbmp error int hmask creat bitmap width height null hmask error bit blt sourc mask destin mask int mask select object hdc mask hmask icon info hbm color select object hdc sourc icon info hbm mask select object hdc sourc icon info hbm mask bit blt hdc mask width height hdc sourc attach monochrom section destin bitmap select object hbm bit blt bitmap monochrom section icon info hbm color select object hdc sourc icon info hbm mask bit blt width height hdc sourc height els select object hdc sourc icon info hbm color bit blt width height hdc sourc paint destin rectangl grey rect rect left rect top rect width rect bottom height bmp select object hdc bmp hbmp fill rect hdc bmp rect sys color brush bit blt black bit monochrom bitmap bit destin magic charl petzold book creat solid brush sys color brush select object hdc bmp bit blt hdc bmp width height invert mask hdc bit blt width height hdc mask select black brush destin creat solid brush delet object select object hdc bmp copi black bit monochrom bitmap black bit destin bit blt hdc bmp width height delet object select object hdc bmp brush free resourc select object hdc sourc src delet hdc sourc select object delet select object hdc bmp bmp delet hdc bmp select object hdc mask mask delet hdc mask delet object hbm releas devic devic intern dispos null creat iconinfo icon info icon info icon icon info icon icon info hbm mask hmask icon info hbm color hbmp creat icon handl creat icon indirect icon info handl error free bitmap delet object hbmp delet object hmask icon info hbm color delet object icon info hbm color delet object icon info hbm mask break default error devic track devic object return case rectangl src imag bound imag data data src imag imag data palett data palett data palett imag data data data palett direct convert palett entri gray rgbs palett int rgbs length data transpar pixel color rgbs int red color red int green color green int blue color blue int intens red red green green green green green blue color red color green color blue intens data palett palett data rgbs els creat bit depth imag data gray palett rgbs int rgbs length rgbs data imag data width height palett data rgbs data mask data data mask data data mask pad data mask pad data transpar pixel data transpar pixel convert pixel int scanlin int width int red mask palett red mask int green mask palett green mask int blue mask palett blue mask int red shift palett red shift int green shift palett green shift int blue shift palett blue shift int height int offset data byte line data pixel width scanlin int width int pixel scanlin pixel data transpar pixel int red pixel red mask red red shift red red shift red red shift int green pixel green mask green green shift green green shift green green shift int blue pixel blue mask blue blue shift blue blue shift blue blue shift int intens red red green green green green green blue data transpar pixel intens intens data data offset byte intens els data data offset byte offset init devic data devic track devic object return default error construct empti instanc class width height specifi rectangl result drawn creat ani draw oper shown follow exampl pre imag imag devic bound rectangl draw rectangl dispos pre note platform limit size imag creat size depend width height depth exampl window imag larger param devic devic creat imag param bound rectangl specifi imag width height null illeg argument devic null current devic bound rectangl null rectangl width height negat error handl obtain imag creation public imag devic devic rectangl bound devic null devic devic devic devic null error bound null error init devic bound width bound height devic track devic object construct instanc class code imag data code param devic devic creat imag param data imag data creat imag null illeg argument devic null current devic imag data null depth imag data support error handl obtain imag creation public imag devic devic imag data data devic null devic devic devic devic null error init devic data devic track devic object construct instanc class type code code code imag data code object imag size pixel transpar imag ignor mask imag white wherev icon visibl black wherev icon transpar addit sourc imag black wherev icon transpar param devic devic creat icon param sourc color data icon param mask mask data icon illeg argument devic null current devic sourc mask null sourc mask differ size error handl obtain imag creation public imag devic devic imag data sourc imag data mask devic null devic devic devic devic null error sourc null error mask null error sourc width mask width sourc height mask height error mask imag data convert mask mask init devic sourc mask devic track devic object construct instanc class load represent specifi input stream throw error error occur load imag result imag unsupport type applic code respons close input stream constructor provid conveni load singl imag onli stream multipl imag onli load load multipl imag code imag loader load code constructor load resourc follow pre static imag load imag display display class clazz string string input stream stream clazz resourc stream string stream null return null imag imag null tri imag imag display stream catch final tri stream close catch return imag pre param devic devic creat imag param stream input stream load imag illeg argument devic null current devic stream null imag file invalid data error occur read data input stream describ imag unsupport depth imag file unrecogn format error handl obtain imag creation public imag devic devic input stream stream devic null devic devic devic devic null error init devic imag data stream devic track devic object construct instanc class load represent file specifi throw error error occur load imag result imag unsupport type constructor provid conveni load singl imag onli specifi file multipl imag onli param devic devic creat imag param filenam file load imag illeg argument devic null current devic file null imag file invalid data error occur read data imag file unsupport depth imag file unrecogn format error handl obtain imag creation public imag devic devic string filenam devic null devic devic devic devic null error init devic imag data filenam devic track devic object creat bit note select int creat int int bitmap int width int height determin depth int bit devic cap int plane devic cap int depth bit plane determin palett boolean direct depth rgbs null direct int num color depth byte log palett byte num color palett entri devic palett num color log palett rgbs num color int num color rgbs log palett log palett log palett boolean bitfield win depth depth bmi header bmi header size sizeof bmi header width width bmi header height height bmi header plane bmi header bit count short depth bitfield bmi header compress els bmi header compress byte bmi direct bmi byte sizeof bitfield els bmi byte sizeof rgbs length move memori bmi bmi header sizeof set rgb color bitmap info int offset sizeof direct bitfield int red mask int green mask int blue mask switch depth case red mask green mask blue mask littl endian bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask break case red mask green mask blue mask big endian bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask break default error els int rgbs length bmi offset byte rgbs blue bmi offset byte rgbs green bmi offset byte rgbs red bmi offset offset int bit int int dib creat section bmi bit dib error bitblt int hdc sourc creat compat int hdc dest creat compat int src select object hdc sourc bitmap int dest select object hdc dest dib bit blt hdc dest width height hdc sourc select object hdc sourc src select object hdc dest dest delet hdc sourc delet hdc dest return dib int creat gdip imag switch type case alpha alpha data null transpar pixel object handl sizeof int img width width int img height height int devic intern null int src hdc creat compat int src bitmap select object src hdc handl int mem hdc creat compat int mem dib creat img width img height mem dib error int mem bitmap select object mem hdc mem dib dib object mem dib sizeof dib int size byte dib width byte dib height bit blt mem hdc img width img height src hdc byte red green blue transpar pixel bit pixel byte color byte color tabl src hdc transpar pixel color blue color green color red color els switch bit pixel case blue byte transpar pixel green byte transpar pixel red byte transpar pixel break case blue byte transpar pixel green byte transpar pixel red byte transpar pixel break case blue byte transpar pixel green byte transpar pixel red byte transpar pixel break select object src hdc src bitmap select object mem hdc mem bitmap delet object src hdc delet object mem hdc byte src data byte size byte move memori src data dib bit size byte delet object mem dib devic intern dispos null alpha int img height int img width src data byte alpha els alpha data null int img height int img width src data alpha data els transpar pixel int img height int img width src data blue src data green src data red src data byte els src data byte int heap process heap int pixel heap alloc heap src data length move memori pixel src data size byte return int gdip bitmap img width img height dib width byte gdip pixel format bpp pixel pixel return int gdip bitmap handl case bug creat bitmap segment fault icon width bigger icon height fix detect creat pixel format bpp imag icon info win icon info icon info els icon info handl icon info int bitmap icon info hbm color bitmap bitmap icon info hbm mask object bitmap sizeof int img width width int img height bitmap icon info hbm mask height height int img pixel img width img height int devic intern null int src hdc creat compat int src bitmap select object src hdc bitmap int mem hdc creat compat int mem dib creat img width img height mem dib error int mem bitmap select object mem hdc mem dib dib object mem dib sizeof dib bit blt mem hdc img width img height src hdc bitmap icon info hbm mask img height select object mem hdc mem bitmap delet object mem hdc byte src data byte dib width byte dib height move memori src data dib bit src data length delet object mem dib select object src hdc icon info hbm mask int img height int img width pixel src hdc src data byte els src data byte select object src hdc src bitmap delet object src hdc devic intern dispos null int heap process heap pixel heap alloc heap src data length move memori pixel src data src data length img gdip bitmap img width img height dib width byte gdip pixel format bpp pixel els img gdip bitmap handl icon info hbm color delet object icon info hbm color icon info hbm mask delet object icon info hbm mask return int img pixel default error return null dispos oper system resourc associ imag applic dispos imag alloc public void dispos handl return devic dispos return mem null mem dispos type win data null destroy icon handl els delet object handl handl mem null devic track devic dispos object devic null compar argument receiv return true repres object class specif comparison param object object compar object return code true code object object code fals code otherwis hash code public boolean equal object object object return true object instanceof imag return fals imag imag imag object return devic imag devic handl imag handl return color map transpar pixel null receiv transpar pixel imag support transpar exampl set imag button label case desir simul transpar background color widget paint transpar pixel imag method check color case place transpar valu set set background return background color imag null transpar imag receiv dispos public color background dispos error transpar pixel return null devic int devic intern null comput background color object handl sizeof int hdc mem creat compat int object select object hdc mem handl int red green blue bit pixel win byte bit byte move memori bit bit byte valu bit int mask bit pixel bit byte transpar pixel bit pixel bit mask move memori bit bit int color pixel hdc mem bit valu move memori bit bit blue color green color red color els byte color byte color tabl hdc mem transpar pixel color blue color green color red color els switch bit pixel case blue transpar pixel green transpar pixel red transpar pixel break case blue transpar pixel green transpar pixel red transpar pixel break case blue transpar pixel green transpar pixel red transpar pixel break default return null select object hdc mem object delet hdc mem releas devic devic intern dispos null return color win devic blue green red return bound receiv rectangl alway valu width height imag return rectangl specifi imag bound receiv dispos imag bitmap icon public rectangl bound dispos error switch type case object handl sizeof return rectangl width height case win return rectangl data width data height els info icon info handl info int bitmap info hbm color bitmap bitmap info hbm mask object bitmap sizeof bitmap info hbm mask height info hbm color delet object info hbm color info hbm mask delet object info hbm mask return rectangl width height default error return null return code imag data code base receiv modif code imag data code affect imag return code imag data code imag data attribut receiv dispos imag bitmap icon imag data public imag data imag data dispos error int depth width height switch type case win return data info win error icon info handl info basic inform int bitmap info hbm color bitmap bitmap info hbm mask object bitmap sizeof depth plane bit pixel width width bitmap info hbm mask height height height int num color depth num color depth creat bmi header bmi header size sizeof bmi header width width bmi header height height bmi header plane bmi header bit count short depth bmi header compress byte bmi byte sizeof num color move memori bmi bmi header sizeof devic int devic intern null creat select bitmap int bitmap creat compat int bitmap select object bitmap bitmap select palett necessari int palett depth int palett devic palett palett palett select palett bitmap palett fals realiz palett bitmap find size imag alloc data int imag size call null bit imag size win error bit bitmap bitmap height bmi move memori bmi header bmi sizeof imag size bmi header size imag byte data byte imag size bitmap data int heap process heap int lpv bit heap alloc heap imag size win error bit bitmap bitmap height lpv bit bmi move memori data lpv bit imag size calcul palett palett data palett null depth rgbs num color int src index int num color rgbs bmi src index bmi src index bmi src index src index palett palett data rgbs els depth palett palett data els depth palett palett data els depth palett palett data els error mask byte mask data null info hbm color bottom mask mask data byte imag size win error bit bitmap bitmap height height lpv bit bmi move memori mask data lpv bit imag size els entir mask creat bmi header bmi header size sizeof bmi header width width bmi header height height bmi header plane bmi header bit count bmi header compress bmi byte sizeof move memori bmi bmi header sizeof color black color white int offset sizeof bmi offset bmi offset bmi offset byte bmi offset select object bitmap info hbm mask call null bit imag size win error bit bitmap info hbm mask height bmi move memori bmi header bmi sizeof imag size bmi header size imag mask data byte imag size int lpv mask bit heap alloc heap imag size win error bit bitmap info hbm mask height lpv mask bit bmi move memori mask data lpv mask bit imag size heap free heap lpv mask bit loop invert mask int mask data length mask data mask scanlin pad int mask pad int bpl imag size height mask pad mask pad mask pad int calc bpl width mask pad mask pad mask pad calc bpl bpl break mask data imag data convert pad mask data width height mask pad clean heap free heap lpv bit select object bitmap bitmap palett select palett bitmap palett fals realiz palett bitmap delet bitmap releas devic devic intern dispos null info hbm color delet object info hbm color info hbm mask delet object info hbm mask construct return imag data imag data imag data imag data width height depth palett data imag data mask data mask data imag data mask pad return imag data case basic inform object handl sizeof depth plane bit pixel width width height height find boolean dib bit devic int devic intern null featur win bit avail win workaround creat temporari bit field retriev imag data int handl handl win dib boolean restor fals mem null mem dispos mem flush restor true data data mem data data null bitmap select object mem handl data null bitmap data null bitmap handl creat handl width height restor int bitmap select object mem handl handl mem data null bitmap bitmap dib true dib null dib dib object handl sizeof dib calcul number color int num color depth dib num color dib clr els num color depth creat byte bmi null bmi header null dib bmi header bmi header size sizeof bmi header width width bmi header height height bmi header plane bmi header bit count short depth bmi header compress bmi byte sizeof num color move memori bmi bmi header sizeof creat select bitmap int bitmap creat compat int bitmap select object bitmap handl select palett necessari int palett dib depth int palett devic palett palett palett select palett bitmap palett fals realiz palett bitmap find size imag alloc data int imag size dib imag size dib size imag els call null bit imag size win error bit bitmap handl height bmi move memori bmi header bmi sizeof imag size bmi header size imag byte data byte imag size bitmap data dib win handl handl imag data temporari move memori data dib bit imag size els move memori data bit imag size els int heap process heap int lpv bit heap alloc heap imag size win error bit bitmap handl height lpv bit bmi move memori data lpv bit imag size heap free heap lpv bit calcul palett palett data palett null depth rgbs num color dib win featur win color tabl support workaround set pixel desir palett index pixel correspond valu int red green blue byte bit byte move memori bit bit byte valu bit int mask bit pixel int num color bit byte bit pixel bit mask move memori bit bit int color pixel bitmap blue color green color red color rgbs red green blue bit valu move memori bit bit els byte color byte num color color tabl bitmap num color color int color index int rgbs length rgbs color color index color color index color color index color index els int src index sizeof int num color rgbs bmi src index bmi src index bmi src index src index palett palett data rgbs els depth palett palett data els depth palett palett data els depth palett palett data els error clean select object bitmap bitmap palett select palett bitmap palett fals realiz palett bitmap win handl handl free temporari delet object handl delet bitmap releas devic devic intern dispos null construct return imag data imag data imag data imag data width height depth palett data imag data transpar pixel transpar pixel imag data alpha alpha alpha alpha data null imag data alpha data byte alpha data length system arraycopi alpha data imag data alpha data alpha data length return imag data default error return null return integ hash code receiv ani object return code true code pass code equal code return valu method return receiv hash equal public int hash code return handl void init devic devic int width int height width height error devic devic type int devic intern null handl creat compat bitmap width height featur window creat compat bitmap fail larg imag fix creat section case handl int bit devic cap int plane devic cap int depth bit plane depth depth handl creat width height depth handl int mem creat compat int bitmap select object mem handl pat blt mem width height select object mem bitmap delet mem devic intern dispos null handl error null devic error static int creat int width int height int depth bmi header bmi header size sizeof bmi header width width bmi header height height bmi header plane bmi header bit count short depth win bmi header compress els bmi header compress byte bmi byte sizeof win move memori bmi bmi header sizeof set rgb color bitmap info win int red mask int green mask int blue mask big endian int offset sizeof bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask int bit int return creat section bmi bit featur win icon info avail win workaround cach object imag data imag type bitmap hbm mask hbm color reconstruct version icon info function object set field hbm mask hbm color correspond bitmap creat note bitmap freed regular icon info static void icon info imag imag info int result init imag devic null imag data info hbm color result info hbm mask result static int init devic devic imag imag imag data imag null imag devic devic window monochrom section display solid black window machin correct data fix convert bit imag data bit imag data befor creat imag window doe support bit imag convert bit imag win depth transpar type depth imag data img imag data width height palett imag data blit imag data data depth byte line byte order width height null null null imag data null img data img depth img byte line byte order img width img height null null null fals fals img transpar pixel transpar pixel img mask pad mask pad img mask data mask data img alpha alpha img alpha data alpha data img window support bit mask bit mask bit mask document imag window support note win creat section requir compress field set bit direct imag creat section case color mask set ani valu consist set mask win platform mode palett direct final palett data palett palett final int red mask palett red mask final int green mask palett green mask final int blue mask palett blue mask int depth depth int order imag data palett data palett null switch depth case depth order imag data palett palett data break case order imag data red mask green mask blue mask palett palett data break case red mask green mask blue mask palett palett data break case red mask green mask blue mask palett palett data break default error palett null imag data img imag data width height depth palett imag data blit imag data data depth byte line byte order width height red mask green mask blue mask imag data null img data img depth img byte line order img width img height palett red mask palett green mask palett blue mask fals fals transpar pixel img transpar pixel palett pixel palett transpar pixel img mask pad mask pad img mask data mask data img alpha alpha img alpha data alpha data img construct bitmap info header hand rgbs palett boolean bitfield win depth depth bmi header bmi header size sizeof bmi header width width bmi header height height bmi header plane bmi header bit count short depth bitfield bmi header compress els bmi header compress bmi header clr rgbs null rgbs length byte bmi palett direct bmi byte sizeof bitfield els bmi byte sizeof rgbs length move memori bmi bmi header sizeof set rgb color bitmap info int offset sizeof palett direct bitfield palett data palett palett int red mask palett red mask int green mask palett green mask int blue mask palett blue mask color mask written base endian imag data byte order imag data bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask els bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte red mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte green mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask bmi offset byte blue mask els int rgbs length bmi offset byte rgbs blue bmi offset byte rgbs green bmi offset byte rgbs red bmi offset offset int bit int int dib creat section bmi bit dib error case scanlin pad work convert byte data data scanlin pad byte line data imag data convert pad data width height depth scanlin pad move memori bit data data length int result null transpar type devic int devic intern null creat color bitmap int hdc src creat compat select object hdc src dib int bitmap creat compat bitmap width height bitmap error int hdc dest creat compat select object hdc dest bitmap bit blt hdc dest width height hdc src releas devic devic intern dispos null creat mask window requir icon mask scanlin pad byte mask data imag data convert pad mask data width height mask pad int mask creat bitmap width height mask data mask error select object hdc src mask pat blt hdc src width height delet hdc src delet hdc dest delet object dib imag null result int bitmap mask els creat icon info info icon true info hbm color bitmap info hbm mask mask int icon creat icon indirect info icon error delet object bitmap delet object mask imag handl icon imag type win imag data els imag null result int dib els imag handl dib imag type imag transpar pixel transpar pixel imag transpar pixel imag alpha alpha alpha alpha data null int length alpha data length imag alpha data byte length system arraycopi alpha data imag alpha data length return result static int init devic devic imag imag imag data sourc imag data mask creat temporari imag locat black pixel imag data imag data int black index sourc palett direct imag data imag data sourc width sourc height sourc depth sourc palett els black rgbs sourc sourc transpar pixel sourc transpar transpar pixel black rgbs length system arraycopi rgbs rgbs length sourc transpar pixel length grow palett black rgbs sourc transpar pixel system arraycopi rgbs length int length sourc transpar pixel rgbs els sourc transpar pixel black rgbs black index sourc transpar pixel imag data imag data sourc width sourc height sourc depth palett data rgbs els black index rgbs length rgbs black index equal black break black index black index rgbs length didn find black palett transpar pixel sourc depth rgbs length grow palett add black rgbs length system arraycopi rgbs rgbs length rgbs length black rgbs els room grow palett black index imag data imag data sourc width sourc height sourc depth palett data rgbs black index black palett copi data system arraycopi sourc data imag data data imag data data length els modifi sourc imag black wherev mask int imag pixel int imag data width int mask pixel int mask width int imag data height sourc pixel imag data width imag pixel mask pixel mask width mask pixel int imag pixel length mask pixel imag pixel black index imag data set pixel sourc width imag pixel imag data mask pad mask scanlin pad imag data mask data mask data return init devic imag imag data void init devic devic imag data null error init devic invok platform specif function alloc handl method part public code imag code mark public onli share packag provid avail platform call applic code param data platform specif data return platform specif handl public int intern data data handl error creat draw imag onli support bitmap type mem null error creat compat devic int devic intern null int imag creat compat devic intern dispos null imag error data null set data field int mask data style mask data layout data style els data style data devic devic data imag data font devic system font return imag invok platform specif function dispos handl method part public code imag code mark public onli share packag provid avail platform call applic code param platform specif handl param data platform specif data public void intern dispos int data data delet return code true code imag dispos code fals code otherwis method dispos state imag imag dispos error invok ani method imag return code true code imag dispos code fals code otherwis public boolean dispos return handl set color map transpar pixel code imag code support transpar exampl set imag button label case desir simul transpar background color widget paint transpar pixel imag method specifi color case exampl pre button button imag set background background set imag imag pre imag modifi oper effect transpar region fill suppli color henc oper revers legal call function null argument method effect receiv doe transpar pixel valu param color color transpar pixel specifi illeg argument color null color dispos receiv dispos public void set background color color note implement win win return dispos error color null error color dispos error transpar pixel return devic int devic intern null chang background color imag object handl sizeof int hdc mem creat compat select object hdc mem handl int max color bit pixel byte color byte max color win error int num color color tabl hdc mem max color color int offset transpar pixel color offset byte color blue color offset byte color green color offset byte color red win error set color tabl hdc mem num color color delet hdc mem releas devic devic intern dispos null return string concis human readabl descript receiv return string represent receiv public string string dispos return imag return imag handl invok platform specif function alloc imag method part public code imag code mark public onli share packag provid avail platform call applic code param devic devic alloc color param type type imag code code code code param handl handl imag return imag object specifi devic type handl public static imag win devic devic int type int handl devic null devic devic devic imag imag imag imag type type imag handl handl imag devic devic return imag 