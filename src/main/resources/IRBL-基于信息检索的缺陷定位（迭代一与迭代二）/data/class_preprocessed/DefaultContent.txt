copyright corpor reserv program accompani materi avail term eclips public licens accompani distribut avail http www eclips org legal epl html contributor corpor initi implement packag org eclips swt custom import org eclips swt import org eclips swt intern compat import org eclips swt widget import java util vector class default content implement style text content privat final static string line delimit system properti line separ vector text listen vector store text listen event send char text store char store actual text int gap start charact posit start gap int gap charact posit gap int gap line line gap exist gap alway associ line int high watermark int watermark int line int array charact posit length repres line text int line count number line text int expand exp expans expon increas line array exponenti int replac expand exp expans expon increas line array exponenti creat default content initi code style text content alway empti line default content super set text add line line index array increas size array necessari code line count code updat reflect entri param start start line param length length line void add line index int start int length int size line length line count size expand line power int line int size compat pow expand exp system arraycopi line line size line line expand exp int rang int start length line line count rang line count add line index code line array code increas size array necessari return array param start start line param length length line param line array array add line index param count posit add line return array line index int add line index int start int length int line array int count int size line array length int line line array count size line int size compat pow replac expand exp replac expand exp system arraycopi line array line size int rang int start length line count rang return line add code text chang listen code listen code text chang event code code text chang event code code text chang event code befor chang text occur code text chang event code chang text occur param listen listen illeg argument listen null public void add text chang listen text chang listen listen listen null error style text listen type listen style text listen listen text listen add element type listen adjust gap accomod text chang occur param posit posit chang occur param size hint size chang param line line gap void adjust gap int posit int size hint int line posit gap start text insert gap posit int size gap gap start size hint watermark size size high watermark return els posit size hint gap start size hint text delet gap posit int size gap gap start size hint watermark size size high watermark return move resiz gap posit size hint line calcul index line text store assum gap exist optim check void index line int start line count int text length text store length int start text length char text store charact text length text store add line index start start start els add line index start start start add line index start start return charact line delimit valid line delimit param charact test return true delimit fals otherwis boolean delimit char return true return true return fals determin replac oper valid default content line delimit split partial delet param start start offset text replac param replac length start offset text replac param text start offset text replac return boolean specifi replac oper valid protect boolean valid replac int start int replac length string text replac length insert text line delimit split start return true start char count return true char befor text rang start char befor char text rang start char return fals els delet text part line delimit delet char start char text rang start char start char char befor delet posit start char befor text rang start char befor return fals char char text rang start replac length char char char delet posit start replac length char count char text rang start replac length char return fals return true calcul index line text rang param offset logic start offset text lineat param length length text lineat includ gap param num line number line initi alloc line index array pass effici exact number line return line index array line identifi start offset length int index line int offset int length int num line int index line int num line int start int line cnt int replac expand exp start length int locat offset locat gap start locat gap ignor gap els char text store locat charact locat text store length text store locat index line add line index start start index line line cnt line cnt start els index line add line index start start index line line cnt line cnt start int line int line cnt system arraycopi index line line line cnt int rang int start start line line cnt rang return line insert text param posit posit insert text param text text insert void insert int posit string text text length return int start line line offset posit int chang text length boolean insert posit char count adjust gap posit chang start line dure insert gap adjust start posit associ startlin insert text place gap int start line offset offset line start line point start line length includ start line newli insert text int start line length physic line start line length chang shrink gap gap start chang int text length text store posit text char figur number line insert int line index line start line offset start line length onli insert empti line line text int num line line length line num line insert line line insert insert happen text leav num line sinc line concaten anoth line num line els num line room line expand line num line shift line replac line int line count start line line num line line insert line int num line line start line offset line start line line updat insert line num line line length line num line start line offset line start line num line line num line line count num line gap line line physic offset gap start move gap adjust size anticip text chang gap resiz actual size specifi size move posit param posit posit chang occur param size size chang param gap line line gap put void move resiz gap int posit int size int gap line char content null int size gap gap start int size size size high watermark size els size watermark size remov gap line inform gap exist adjust line length line gap line line gap line size adjust offset line gap line int gap line line count line line size size size remov gap content char text store length size system arraycopi text store content gap start system arraycopi text store gap content gap start content length gap start text store content gap start gap posit return content char text store length size size int gap start posit int gap gap start size size system arraycopi text store content gap start system arraycopi text store gap start content gap content length gap els gap start gap start int delta gap start gap start system arraycopi text store content gap start system arraycopi text store gap start content gap delta system arraycopi text store gap content gap delta text store length gap els int delta gap start gap start system arraycopi text store content gap start system arraycopi text store gap content gap start delta system arraycopi text store gap delta content gap content length gap text store content gap start gap start gap gap add gap line inform gap exist gap line gap line adjust line length int gap length gap gap start line gap line line gap line gap length adjust offset line gap line int gap line line count line line gap length return number line specifi text param start offset start text lineat param length length text lineat return number line int line count int start offset int length length return int line cnt int count int start offset gap start gap gap start count length gap start gap ignor gap els char text store charact text store length text store count line cnt els line cnt count return line cnt return number line specifi text param text text lineat return number line text int line count string text int line count int length text length int length char text char length text char line count els line count return line count return logic length text store public int char count int length gap gap start return text store length length return line code index code delimit param index index line return return logic line text gap illeg argument index rang public string line int index index line count index error int start line index int length line index int start length gap exist gap start start gap line befor gap length delimit text store start length length return string text store start length els gap specifi rang strip gap string buffer buf string buffer int gap length gap gap start buf append text store start gap start start buf append text store gap length gap length gap start start length buf length length delimit buf char length length return buf string substr length return line delimit style text widget insert line delimit differ delimit code style text content code interfac return platform line delimit specifi line separ system properti public string line delimit return line delimit return line index delimit param index index line return return logic line text gap delimit string full line int index int start line index int length line index int start length gap exist gap start start gap line befor gap return string text store start length els gap specifi rang strip gap string buffer buf string buffer int gap length gap gap start buf append text store start gap start start buf append text store gap length gap length gap start start return buf string return physic line index delimit gap param index line index return physic line string physic line int index int start line index int length line index return physic text start length return number line text store public int line count return line count return line offset param char posit logic charact offset doe includ gap return line index illeg argument char posit rang public int line offset int char posit int posit char posit char count char posit error char posit gap start posit befor gap posit char posit els posit includ gap posit char posit gap gap start line line empti posit doesn exist charact insert line count int line line count posit line line line line return line int high line count int int index line count high index high int line start line index int line line start line index posit line start high index els posit line high index break els index return high return line index physic offset param posit physic charact offset includ gap return line index int line physic offset int posit int high line count int int index line count high index high int line start line index int line line start line index posit line start high index els posit line high index break els index return high return logic offset line param line index index line return logic start offset line ani line offset line valid call answer illeg argument line index rang public int offset line int line index line index return line index line count line index error int start line line index start gap return start gap gap start els return start increas line index array accomod line param num line number increas array void expand line int num line int size line length size line count num line return int line int size math max num line system arraycopi line line size line line report error param code error code void error int code error code return gap exist text store return true gap exist fals otherwis boolean gap exist return gap start gap return string repres contin content text store param start physic start offset text return param length physic length text return return text string physic text int start int length return string text store start length return string repres logic content text store gap strip param start logic start offset text return param length logic length text return return text public string text rang int start int length text store null return length return int start length gap exist gap start return string text store start length gap start start int gap length gap gap start return string text store start gap length length string buffer buf string buffer buf append text store start gap start start buf append text store gap gap start return buf string remov specifi code text chang listen code param listen listen illeg argument listen null public void remov text chang listen text chang listen listen listen null error int text listen size type listen type listen type listen text listen element type listen event listen listen text listen remov element break replac text code text code start posit code start code length code replac length code notifi appropri listen send text chang event code line count code number line insert code replac line count code number line delet base chang occur visual exampl replac text text replac line count line count param start start offset text replac param replac length start offset text replac param text start offset text replac text chang result multi byte line delimit split partial delet split line delimit insert text charact delimit delet part line delimit support public void replac text rang int start int replac length string text check invalid replac oper valid replac start replac length text error inform listen style text event event style text event event type style text text chang event start start event replac line count line count start replac length event text text event line count line count text event replac char count replac length event char count text length send text event event delet text replac delet start replac length event replac line count insert text insert start text inform listen event style text event event type style text text chang send text event event print line send text listen text chang event void send text event style text event event int text listen size style text listen text listen element handl event event set content text remov gap sinc sensibl predict chang occur param text text public void set text string text text store text char array gap start gap expand exp index line style text event event style text event event type style text text set event text send text event event delet text param posit posit text delet start param length length text delet param num line number line delet void delet int posit int length int num line length return int start line line offset posit int start line offset offset line start line int line line offset posit length string text boolean split delimit fals posit length char count text text rang posit length text char text char split delimit true adjust gap posit length length start line int line index line posit length gap gap start num line enlarg gap gap enlarg left posit length gap start gap start length els gap length figur length concaten line find line delmit posit int posit boolean eol fals text store length eol gap start gap char text store delimit text store length text store eol true updat line delet start line start line posit start line offset posit figur number line delet int num line line length split delimit num line shift line delet line updat offset length line int line line count line num line line line count num line gap line line physic offset gap start 