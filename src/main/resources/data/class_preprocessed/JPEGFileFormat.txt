copyright corpor reserv program accompani materi avail term eclips public licens accompani distribut avail http www eclips org legal epl html contributor corpor initi implement packag org eclips swt intern imag import org eclips swt import org eclips swt graphic import java final class file format extend file format int restart interv frame header frame header int imag width imag height int interleav mcu col interleav mcu row int max max boolean progress int sampl precis int compon int frame compon int compon id byte imag compon int data unit int data unit int preced scan header scan header byte data buffer int current bit count int buffer current posit int restart int restart number huffman tabl huffman tabl huffman tabl huffman tabl int quantiz tabl int current byte int encod factor int eobrun constant public static final int public static final int fix point constant public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int marker code public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int public static final int frame compon paramet constant public static final int public static final int public static final int public static final int public static final int scan compon paramet constant public static final int public static final int compon constant public static final int public static final int public static final int public static final int extend test public static final int extend offset int public static final int zig zag public static int tabl tabl tabl tabl public static int tabl tabl tabl tabl tabl tabl tabl tabl tabl bit tabl static initi void compress imag data imag byte data comp byte data comp byte data comp int src width imag width int src height imag height int factor max max int frame compon imag compon byte compon int compon frame compon frame compon compon id imag compon byte frame compon frame compon frame compon frame compon compon id int pos pos src height pos int src pos src width int dst pos frame compon system arraycopi data comp src imag compon dst src width frame compon frame compon compon id int pos pos src height max pos int dest row index pos frame compon int pos pos src width max pos int sum int max int src index pos max src width pos max int max sum data comp src index imag compon dest row index pos byte sum factor frame compon frame compon compon id int pos pos src height max pos int dest row index pos frame compon int pos pos src width max pos int sum int max int src index pos max src width pos max int max sum data comp src index imag compon dest row index pos byte sum factor int comp comp compon comp byte imag compon imag compon comp frame compon frame compon compon id comp int factor frame compon int factor frame compon int compon width frame compon int compon height frame compon int compress width src width max factor int compress height src height max factor compress width compon width int delta compon width compress width int pos pos compress height pos int dst pos compon width delta int data valu imag compon dst int delta imag compon dst byte data valu compress height compon height int src compress height compon width int pos compress height pos compon height pos int dst pos compon width system arraycopi imag compon src imag compon dst compon width void convert bit imag data imag rgbs imag int palett size rgbs length byte comp byte palett size byte comp byte palett size byte comp byte palett size int src width imag width int src height imag height int palett size color rgbs int color red int color green int color blue int tabl tabl tabl comp byte comp tabl tabl tabl comp byte comp tabl tabl tabl comp byte comp int size src width src height byte data comp byte size byte data comp byte size byte data comp byte size byte orig data imag data int byte line imag byte line int max scanlin byte src width int pos pos src height pos int pos pos max scanlin byte pos int src index pos byte line pos int dst index pos src width pos int valu orig data src index int valu valu valu valu data comp dst index comp valu data comp dst index comp valu data comp dst index comp valu data comp dst index comp valu data comp dst index comp valu data comp dst index comp valu compress imag data comp data comp data comp void convert bit imag data imag rgbs imag int palett size rgbs length byte comp byte palett size byte comp byte palett size byte comp byte palett size int src width imag width int src height imag height int palett size color rgbs int color red int color green int color blue int tabl tabl tabl comp byte comp tabl tabl tabl comp byte comp tabl tabl tabl comp byte comp int dst width imag width int dst height src height int stride src width int size dst width dst height byte data comp byte size byte data comp byte size byte data comp byte size byte orig data imag data int pos pos src height pos int src row index pos stride int dst row index pos dst width int pos pos src width pos int valu orig data src row index pos int dst index dst row index pos data comp dst index comp valu data comp dst index comp valu data comp dst index comp valu compress imag data comp data comp data comp byte convert unsupport format answer empti byte array return byte void convert imag imag data imag switch imag depth case convert bit imag return case convert bit imag return case case case convert multi imag return default error return void convert multi imag data imag int src width imag width int src height imag height int size src width src height byte data comp byte size byte data comp byte size byte data comp byte size palett data palett imag palett int buffer int src width palett direct int red mask palett red mask int green mask palett green mask int blue mask palett blue mask int red shift palett red shift int green shift palett green shift int blue shift palett blue shift int pos pos src height pos imag pixel pos src width buffer int dst row index pos src width int pos pos src width pos int pixel buffer pos int dst data index dst row index pos int pixel red mask red shift red shift red shift int pixel green mask green shift green shift green shift int pixel blue mask blue shift blue shift blue shift data comp dst data index byte tabl tabl tabl data comp dst data index byte tabl tabl tabl data comp dst data index byte tabl tabl tabl els int pos pos src height pos imag pixel pos src width buffer int dst row index pos src width int pos pos src width pos int pixel buffer pos int dst data index dst row index pos rgb palett pixel int rgb red int rgb green int rgb blue data comp dst data index byte tabl tabl tabl data comp dst data index byte tabl tabl tabl data comp dst data index byte tabl tabl tabl compress imag data comp data comp data comp byte convert int comp width frame compon compon id int byte line imag width byte data byte byte line imag height byte comp imag compon int dest index int imag height int src index comp width int byte line int comp src index els imag width data dest index byte src index dest index return data byte convert convert exist imag compon format defin normal rang convers equat implement therefor repres incom valu number deriv section date june avoid float point arithmet repres fraction constant integ scale digit precis divid product appropri correct answer notic integr input doe contribut ani fraction particip speed avoid ani multipl loop precalcul constant time possibl valu bit veri reason onli entri tabl bit sampl accept veri reason bit sampl lossless storag shouldn chang colorspac valu integ advanc valu calcul left scale sinc add togeth befor int size imag width imag height compon byte rgb data byte size int dest index expand imag compon byte comp imag compon byte comp imag compon byte comp imag compon int comp width frame compon compon id int imag height int src index comp width int imag width int comp src index int comp src index int comp src index int tabl int tabl tabl int tabl els els els rgb data dest index byte rgb data dest index byte rgb data dest index byte dest index src index return rgb data byte convert unsupport format answer empti byte array return byte void decod coeffici int data unit int comp int param scan header compon paramet compon id comp huffman tabl tabl huffman tabl param int int decod tabl tabl int int els break els int bit receiv data unit zig zag extend bit void decod coeffici int data unit int comp int start int int approx bit eobrun eobrun return int param scan header compon paramet compon id comp huffman tabl tabl huffman tabl param int start int decod tabl tabl int int els eobrun receiv break els int bit receiv data unit zig zag extend bit approx bit void decod refin coeffici int data unit int comp int start int int approx bit int param scan header compon paramet compon id comp huffman tabl tabl huffman tabl param int start eobrun int index zig zag data unit index data unit index refin data unit index approx bit eobrun els int decod tabl tabl int int int int index zig zag data unit index data unit index refin data unit index approx bit els els eobrun receiv els int bit receiv int int index zig zag data unit index data unit index data unit index refin data unit index approx bit els index zig zag bit data unit index approx bit els data unit index approx bit int refin int int approx bit int bit bit bit approx bit els int bit bit bit approx bit return void decod coeffici int data unit int comp boolean int approx bit int param scan header compon paramet compon id comp huffman tabl tabl huffman tabl param int progress int bit bit data unit bit approx bit els preced comp int bit decod tabl tabl bit int bit receiv bit int diff extend bit bit diff preced comp progress approx bit data unit void dequant int data unit int comp int tabl quantiz tabl frame compon compon id comp int data unit length int index zig zag data unit index data unit index tabl byte decod imag compon int comp id int compon int comp id index int compon comp id comp id index comp id index comp id length comp id comp id comp id return convert comp id length comp id comp id comp id return convert comp id length return convert return convert void decod int xmcu int ymcu int compon scan boolean int start int int approx bit int comp comp compon scan comp int scan compon comp scan header compon paramet compon id scan compon null scan compon int frame compon frame compon compon id scan compon int frame compon int frame compon compon scan int comp width frame compon int ivi ivi ivi int ihi ihi ihi progress progress scan creat data unit subsequ scan refin exist data unit int index ymcu ivi comp width xmcu ihi data unit data unit scan compon index data unit null data unit int data unit scan compon index data unit els sequenti clear reus data unit buffer int data unit length data unit progress scan header progress scan decod coeffici data unit scan compon approx bit progress decod coeffici data unit scan compon els scan header progress scan decod coeffici data unit scan compon start approx bit els decod refin coeffici data unit scan compon start approx bit loader listen dequant sampl color convers copi coeffici data order display imag increment int temp data unit data unit int system arraycopi temp data unit progress progress loader listen dequant data unit scan compon invers data unit store data data unit scan compon xmcu ymcu ihi ivi void decod scan progress scan header verifi progress scan error int compon scan scan header number imag compon int mcu row scan interleav mcu row int mcus row interleav mcu col compon scan interleav int scan compon scan header compon paramet compon id scan compon null scan compon int frame compon frame compon compon id scan compon int frame compon int frame compon int mcu width max int mcu height max mcus row imag width mcu width mcu width mcu row scan imag height mcu height mcu height boolean scan header scan int start scan header start spectral select int scan header spectral select int approx bit scan header approx bit posit restart restart interv restart number int ymcu ymcu mcu row scan ymcu int xmcu xmcu mcus row xmcu restart interv restart process restart interv restart decod xmcu ymcu compon scan start approx bit int decod tabl huffman tabl huffman tabl int int max code huffman tabl max code int min code huffman tabl min code int val ptrs huffman tabl val ptrs int huff val huffman tabl valu int code bit code max code code code bit int val ptrs code min code return huff val void emit int huff code int bit bit error int power int int code huff code power bit bit current bit count byte code buffer byte code buffer byte code code buffer byte code code buffer byte code code buffer byte code int ab bit current bit count ab ab ab ab current byte code buffer emit byte byte current byte emit byte code buffer current byte code buffer current bit count bit els current bit count bit current bit count current byte code buffer emit byte byte current byte current byte code buffer current bit count els current byte code buffer void emit byte byte byte valu buffer current posit reset output buffer data buffer buffer current posit byte valu buffer current posit byte valu emit byte byte void encod coeffici int data unit int comp int param scan header compon paramet comp huffman tabl tabl huffman tabl param int code tabl code byte size tabl code length int int int valu data unit zig zag valu emit code size els els emit code size valu int ab valu valu ab valu ab valu ab valu int bit bit tabl ab valu int bit emit code size emit ab valu bit els int bit bit tabl valu int bit emit code size emit valu bit void encod coeffici int data unit int comp int param scan header compon paramet comp huffman tabl tabl huffman tabl param int preced comp int valu data unit int diff valu preced comp valu diff int ab diff diff int bit bit tabl ab diff emit tabl code bit tabl code length bit emit ab diff bit els int bit bit tabl diff emit tabl code bit tabl code length bit bit emit diff bit void encod int xmcu int ymcu int compon scan scan header number imag compon data unit int int comp comp compon scan comp int frame compon frame compon compon id comp int frame compon int frame compon int ivi ivi ivi int ihi ihi ihi extract data data unit comp xmcu ymcu ihi ivi data unit quantiz data data unit comp encod coeffici data unit comp encod coeffici data unit comp void encod scan int ymcu ymcu interleav mcu row ymcu int xmcu xmcu interleav mcu col xmcu encod xmcu ymcu current bit count emit byte byte current byte reset output buffer void expand imag compon int comp comp compon comp int frame compon frame compon compon id comp int frame compon int frame compon int max int max byte compon imag compon comp int comp width frame compon int comp height frame compon int comp width comp width int comp height comp height rgbs imag data src imag data comp width comp height palett data rgbs compon imag data dest src scale comp width comp height imag compon comp dest data int extend int diff int diff extend test return diff extend offset els return diff void extract data int data unit int comp int xmcu int ymcu int ihi int ivi byte comp imag imag compon comp int frame compon frame compon compon id comp int frame compon int frame compon int comp width frame compon int src index ymcu ivi comp width xmcu ihi int dest index int int col col col data unit dest index comp imag src index col dest index src index comp width void int data unit int row row row int index row int tmp data unit index data unit index int tmp data unit index data unit index int tmp data unit index data unit index int tmp data unit index data unit index int tmp data unit index data unit index int tmp data unit index data unit index int tmp data unit index data unit index int tmp data unit index data unit index part figur note publish figur faulti rotat sqrt sqrt int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp data unit index tmp tmp data unit index tmp tmp int tmp tmp int scale factor extend test int scale factor extend test int tmp scale factor data unit index scale factor scale factor data unit index tmp scale factor data unit index scale factor scale factor data unit index odd part figur note paper omit factor sqrt repres cos paper tmp tmp tmp tmp int tmp tmp int tmp tmp int tmp tmp int sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt sqrt tmp scale factor data unit index scale factor scale factor data unit index tmp scale factor data unit index scale factor scale factor data unit index tmp scale factor data unit index scale factor scale factor data unit index tmp scale factor data unit index scale factor scale factor data unit index pass process column note descal result factor undo scale int col col col int col int col int col int col int col int col int col int col int tmp data unit data unit int tmp data unit data unit int tmp data unit data unit int tmp data unit data unit int tmp data unit data unit int tmp data unit data unit int tmp data unit data unit int tmp data unit data unit part figur note publish figur faulti rotat sqrt sqrt int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp int scale factor extend test int scale factor extend test int tmp tmp scale factor data unit scale factor scale factor data unit tmp tmp scale factor data unit scale factor scale factor data unit int tmp tmp scale factor extend test scale factor extend test tmp scale factor data unit scale factor scale factor data unit tmp scale factor data unit scale factor scale factor data unit odd part figur note paper omit factor sqrt repres cos paper tmp tmp tmp tmp int tmp tmp int tmp tmp int tmp tmp int sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt sqrt tmp scale factor data unit scale factor scale factor data unit tmp scale factor data unit scale factor scale factor data unit tmp scale factor data unit scale factor scale factor data unit tmp scale factor data unit scale factor scale factor data unit void appn appn appn input stream appn verifi error void comment input stream void arithmet condit tabl input stream void huffman tabl dht huffman tabl input stream dht verifi error huffman tabl null huffman tabl huffman tabl huffman tabl null huffman tabl huffman tabl huffman tabl dht tabl dht tabl int dht tabl length huffman tabl dht tabl dht tabl dht tabl tabl class huffman tabl dht tabl tabl identifi dht tabl els huffman tabl dht tabl tabl identifi dht tabl void restart interv input stream void quantiz tabl dqt quantiz tabl input stream int current tabl quantiz tabl current tabl null current tabl int int dqt tabl key dqt quantiz tabl key int dqt tabl valu dqt quantiz tabl valu int dqt tabl key length int index dqt tabl key current tabl index dqt tabl valu quantiz tabl current tabl void restart interv dri restart interv input stream dri verifi error restart interv dri restart interv static void initi initi tabl initi tabl initi bit count tabl static void initi bit count tabl int bit int power bit tabl int bit tabl int bit tabl length power bit power bit tabl bit static void initi tabl tabl int tabl int tabl int tabl int tabl int tabl int tabl tabl tabl int tabl int int tabl tabl tabl tabl tabl tabl tabl tabl static void initi tabl tabl int tabl int tabl int tabl int int int tabl tabl tabl tabl void invers int data unit int row row row int index row due quantiz usual find mani input coeffici especi term exploit short circuit calcul ani row term case output equal coeffici scale factor typic imag quantiz tabl row calcul simplifi row data unit index int val data unit index int index index data unit val els part revers part rotat sqrt int data unit index int data unit index int int tmp int tmp int tmp data unit index data unit index int tmp data unit index data unit index int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp odd part figur matrix unitari henc transpos invers respect tmp data unit index tmp data unit index tmp data unit index tmp data unit index tmp tmp tmp tmp tmp tmp int tmp tmp int sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt sqrt tmp tmp tmp tmp tmp tmp tmp tmp int descal factor extend test int descal factor extend test data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor data unit index tmp tmp descal factor descal factor pass process column note descal result factor undo scale int col col col int col int col int col int col int col int col int col int col column data unit col int val data unit data unit val data unit val data unit val data unit val data unit val data unit val data unit val data unit val els part revers part rotat sqrt int data unit int data unit int int tmp int tmp int tmp data unit data unit int tmp data unit data unit int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp int tmp tmp tmp odd part figur matrix unitari henc transpos invers respect tmp data unit tmp data unit tmp data unit tmp data unit tmp tmp tmp tmp tmp tmp int tmp tmp int sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt sqrt tmp tmp tmp tmp tmp tmp tmp tmp final output stage input tmp tmp tmp tmp int descal factor extend test int descal factor extend test data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor data unit tmp tmp descal factor descal factor boolean file format data input stream stream tri start imag soi start imag stream stream unread soi refer return soi verifi longer check app catch return fals boolean column int data unit int col return data unit col data unit col data unit col data unit col data unit col data unit col data unit col boolean row int data unit int index return data unit index data unit index data unit index data unit index data unit index data unit index data unit index imag data load byte stream start imag soi start imag input stream soi verifi error restart interv process tabl preced frame header process tabl start frame frame header frame header input stream frame header verifi error imag width frame header sampl line imag height frame header number line max frame header max factor max frame header max factor int mcu width max int mcu height max interleav mcu col imag width mcu width mcu width interleav mcu row imag height mcu height mcu height progress frame header progress sampl precis frame header sampl precis compon frame header number imag compon frame compon frame header compon paramet compon id frame header compon identifi imag compon byte compon progress progress jpeg data unit data unit int compon els sequenti jpeg onli data unit data unit int int compon int frame compon frame compon compon id int buffer size frame compon frame compon imag compon byte buffer size progress data unit int buffer size process tabl preced scan header process tabl start scan scan header scan header input stream scan header verifi error process scan tabl int progress scan count boolean fals reset input buffer preced int decod scan progress loader listen imag data imag data creat imag data loader notifi listen imag loader event loader imag data progress scan count fals progress scan count unread ani buffer data befor tabl int delta buffer current posit delta byte unread buffer byte delta system arraycopi data buffer buffer current posit unread buffer delta tri input stream unread unread buffer catch error process tabl preced scan header segment jpeg segment process tabl jpeg segment null jpeg segment segment marker true els scan header scan header input stream scan header verifi error progress int ymcu ymcu interleav mcu row ymcu int xmcu xmcu interleav mcu col xmcu int comp comp compon comp int frame compon frame compon compon id comp int frame compon int frame compon int comp width frame compon int ivi ivi ivi int ihi ihi ihi int index ymcu ivi comp width xmcu ihi data unit data unit comp index dequant data unit comp invers data unit store data data unit comp xmcu ymcu ihi ivi imag data imag data creat imag data progress loader listen loader notifi listen imag loader event loader imag data progress scan count true return imag data imag data imag data creat imag data return imag data intern imag width imag height compon sampl precis set palett compon decod imag compon null null int bit current bit count current bit count current byte current byte current byte return els return buffer current posit buffer current posit reset input buffer buffer current posit current byte data buffer buffer current posit current bit count byte byte buffer current posit reset input buffer current bit count byte data buffer els byte data buffer buffer current posit current byte byte buffer current posit current bit count current byte current byte current byte return els return els byte return els error return els current bit count current byte current byte current byte return els return void process restart interv buffer current posit buffer current posit reset input buffer buffer current posit current byte data buffer buffer current posit current byte current byte buffer current posit buffer current posit reset input buffer buffer current posit current byte data buffer buffer current posit current byte restart number error buffer current posit buffer current posit reset input buffer buffer current posit current byte data buffer buffer current posit current bit count restart restart interv restart number restart number preced int eobrun process marker frame header scan header segment process tabl true segment jpeg segment seek unspecifi marker input stream jpeg segment null return null frame header sof frame header jpeg segment refer sof verifi return jpeg segment int marker jpeg segment segment marker switch marker case onli file error case case return jpeg segment case break case break case break case break case break case break default skip segment input stream void quantiz data int data unit int comp int tabl quantiz tabl frame compon compon id comp int data unit length int index zig zag int data data unit index int ab data data data data int valu tabl int valu ab data ab data valu data unit index els ab data valu data data unit index ab data els data unit index ab data int receiv int bit int int bit bit return void reset input buffer data buffer null data buffer byte tri input stream read data buffer catch error current bit count buffer current posit void reset output buffer data buffer null data buffer byte els tri output stream write data buffer buffer current posit catch error buffer current posit static segment seek unspecifi marker data input stream byte stream byte byte array byte tri true byte stream read byte array return null byte array byte byte stream read byte array return null byte array byte byte array byte stream unread byte array return segment byte array catch error return null palett data set palett compon entri int entri return palett data entri return palett data static void skip segment data input stream byte stream tri byte byte array byte segment jpeg segment segment byte array byte stream read byte array byte array length error byte array byte array byte array error int delta jpeg segment segment length byte stream skip delta catch error void store data int data unit int comp int xmcu int ymcu int int ihi int int ivi byte comp imag imag compon comp int frame compon frame compon compon id comp int comp width frame compon int dest index ymcu ivi comp width xmcu ihi int src index int int col col col int data unit src index els comp imag dest index col byte src index dest index comp width void unload byte stream imag data imag start imag write stream output stream error appn appn appn byte byte byte appn write stream output stream error quantiz tabl int quantiz tabl chrom quantiz tabl default chromin tabl chrom scale encod factor int jpeg key chrom quantiz tabl key int jpeg valu chrom quantiz tabl valu int jpeg key length quantiz tabl jpeg key jpeg valu quantiz tabl lum quantiz tabl default lumin tabl lum scale encod factor jpeg key lum quantiz tabl key jpeg valu lum quantiz tabl valu int jpeg key length quantiz tabl jpeg key jpeg valu lum write stream output stream error chrom write stream output stream error int frame length scan length precis int frame param scan param imag depth frame length frame param int frame param int scan param int scan param int scan length compon precis els frame length frame param int frame param int frame param int frame param int scan param int scan param int scan param int scan param int scan length compon precis imag width imag width imag height imag height frame header frame header byte frame header set segment marker frame header set segment length frame length frame header set sampl precis precis frame header set sampl line imag width frame header set number line imag height frame header set number imag compon compon frame header compon paramet frame param frame header compon identifi int frame header initi content frame header write stream output stream error frame compon frame param compon id frame header compon identifi max frame header max factor max frame header max factor int mcu width max int mcu height max interleav mcu col imag width mcu width mcu width interleav mcu row imag height mcu height mcu height huffman tabl huffman tabl huffman tabl huffman tabl huffman tabl dht tabl huffman tabl huffman tabl default lumin tabl huffman tabl default chromin tabl huffman tabl default lumin tabl huffman tabl default chromin tabl int dht tabl length huffman tabl dht tabl dht tabl dht tabl write stream output stream error huffman tabl tabl dht tabl tabl int tabl length huffman tabl huffman tabl tabl huffman tabl tabl class huffman tabl huffman tabl tabl identifi huffman tabl els huffman tabl huffman tabl tabl identifi huffman tabl preced int scan header scan header byte scan header set segment marker scan header set segment length scan length scan header set number imag compon compon scan header set start spectral select scan header set spectral select scan header compon paramet scan param scan header initi content scan header write stream output stream error convert imag imag reset output buffer current byte current bit count encod scan imag write stream output stream error 